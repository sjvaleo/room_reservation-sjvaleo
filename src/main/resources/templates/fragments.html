<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<th:block th:fragment="site_header">
  <style>
    /* Header + menu (dark theme to match site) */
    .site-header { position:relative; display:flex; align-items:center; gap:12px; }
    .brand { margin-left:auto; font-weight:800; font-size:24px; letter-spacing:.3px; }
    .brand a { text-decoration:none; color:var(--text); }

    .hamburger {
      background:#111827; color:var(--text);
      border:1px solid var(--border);
      font-size:18px; cursor:pointer; width:38px; height:38px; border-radius:10px;
      display:inline-flex; align-items:center; justify-content:center;
      box-shadow: inset 0 1px rgba(255,255,255,0.03);
    }
    .hamburger:hover { filter:brightness(1.06); }

    .menu-panel {
      position:absolute; top:48px; left:0;
      background: linear-gradient(180deg, var(--card), var(--card-2));
      color:var(--text);
      border:1px solid var(--border); border-radius:12px;
      padding:8px; display:none; box-shadow:0 12px 30px rgba(2,6,23,.35);
      z-index:50; min-width:200px;
    }
    .menu-panel a, .menu-panel button {
      display:block; width:100%; text-align:left;
      padding:8px 10px; border-radius:10px; border:1px solid transparent;
      background:transparent; color:var(--text); text-decoration:none; cursor:pointer;
    }
    .menu-panel a:hover, .menu-panel button:hover {
      background:#0c1325; border-color:var(--border);
    }
    /* prevent purple visited links in header */
    .menu-panel a:visited { color:var(--text); }
  </style>

  <header class="site-header">
    <button class="hamburger" id="menuBtn" aria-label="Menu">â˜°</button>

    <div class="menu-panel" id="menuPanel">
      <a th:href="@{/search}">Search</a>
      <a th:href="@{/floors}">Browse floors</a>
      <a th:href="@{/bookings}">My Bookings</a>
      <form th:action="@{/logout}" method="post" style="margin-top:8px;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit">Log out</button>
      </form>
    </div>

    <h1 class="brand"><a th:href="@{/}">Room Reservation</a></h1>
  </header>

  <script>
    (function () {
      const btn = document.getElementById('menuBtn');
      const panel = document.getElementById('menuPanel');
      if (!btn || !panel) return;
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
      });
      document.addEventListener('click', (e) => {
        if (panel.style.display === 'block' && !panel.contains(e.target) && e.target !== btn) {
          panel.style.display = 'none';
        }
      });
    })();
  </script>
</th:block>
</html>
