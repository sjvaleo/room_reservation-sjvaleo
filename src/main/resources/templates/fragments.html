<!-- templates/fragments.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head></head>
<body>
  <!-- Header fragment -->
  <th:block th:fragment="appHeader">
    <header class="page-header" style="position:relative;display:flex;align-items:center;gap:12px;">
      <button class="hamburger" id="menuBtn" aria-label="Menu">â˜°</button>

      <nav style="display:flex;gap:12px;">
        <a class="btn" th:href="@{/search}">Search</a>
        <a class="btn" th:href="@{/floors}">Browse floors</a>
        <a class="btn" th:href="@{/bookings}">My Bookings</a>
      </nav>

      <div class="menu-panel" id="menuPanel" style="position:absolute;top:48px;left:12px;display:none;">
        <a th:href="@{/search}">Search</a>
        <a th:href="@{/floors}">Browse floors</a>
        <a th:href="@{/bookings}">My Bookings</a>
        <form th:action="@{/logout}" method="post" style="margin-top:8px;">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit" class="btn" style="width:100%;">Log out</button>
        </form>
      </div>

      <h1 class="brand" style="margin-left:auto;"><a th:href="@{/}" style="text-decoration:none;color:inherit;">Room Reservation</a></h1>
    </header>

    <script>
      (function(){
        const btn = document.getElementById('menuBtn');
        const panel = document.getElementById('menuPanel');
        if (!btn || !panel) return;
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        });
        document.addEventListener('click', (e) => {
          if (panel.style.display === 'block' && !panel.contains(e.target) && e.target !== btn) {
            panel.style.display = 'none';
          }
        });
      })();
    </script>
  </th:block>
</body>
</html>
