<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8" />
  <title th:text="${room.name} + ' • Room Reservation'">Room</title>
  <link rel="stylesheet" th:href="@{/styles.css}" />
  <th:block th:replace="~{_header.css :: *}"></th:block>
</head>
<body class="container">
  <div class="page">
    <header class="page-header">
      <button class="hamburger" id="menuBtn" aria-label="Menu">☰</button>
      <div class="menu-panel" id="menuPanel">
        <a th:href="@{/bookings}">My Bookings</a>
        <a th:href="@{/search}">Search</a>
        <form th:action="@{/logout}" method="post" style="margin:0;"><button type="submit" class="btn" style="width:100%;">Log out</button></form>
      </div>
      <div class="header-actions">
        <a class="btn" th:href="@{'/rooms/by-floor/' + ${room.floor.id}}">Back to Rooms</a>
      </div>
    </header>

    <section class="section">
      <h2 th:text="${room.name}">Room</h2>
      <p class="kv" style="margin-top:8px">
        <span><b th:text="${room.capacity}">4</b> seats</span>
        <span><b th:text="${room.tvCount}">1</b> TV</span>
        <span th:text="${room.whiteboard ? 'Whiteboard' : 'No Whiteboard'}">Whiteboard</span>
      </p>
    </section>

    <section class="section" th:if="${date != null || start != null}">
      <h3>Selected criteria</h3>
      <p style="margin:6px 0;">
        <span th:if="${date != null}"><b>Date:</b> <span th:text="${date}">yyyy-mm-dd</span></span>
        <span th:if="${start != null}" style="margin-left:12px;"><b>Start:</b> <span th:text="${start}">HH:mm</span></span>
        <span th:if="${durationMinutes != null}" style="margin-left:12px;"><b>Duration:</b> <span th:text="${durationMinutes}">60</span> min</span>
      </p>
    </section>

    <section class="section">
      <h3>Book this room</h3>
      <form th:action="@{/book}" method="post" class="form" style="margin-top:12px">
        <input type="hidden" name="roomId" th:value="${room.id}" />
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <label>Date <input id="date" name="date" type="date" th:value="${date}" required /></label>
        <label>Start Time <input id="time" name="time" type="time" th:value="${start}" required /></label>
        <label>Duration (minutes) <input id="durationMinutes" name="durationMinutes" type="number" min="15" step="15" th:value="${durationMinutes != null ? durationMinutes : 60}" required /></label>
        <div class="nav" style="justify-content:flex-start; gap:10px; margin-top:8px;">
          <button type="submit" class="btn">Book</button>
          <a class="btn" th:href="@{'/rooms/by-floor/' + ${room.floor.id}}">Back to Rooms</a>
        </div>
      </form>
    </section>
  </div>
  <th:block th:replace="~{_header.script :: *}"></th:block>
</body>
</html>
